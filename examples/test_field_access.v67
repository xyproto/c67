import sdl3 as sdl

cstruct SDL_Event {
    type as uint32,
    timestamp as uint64
}

sdl.SDL_Init(sdl.SDL_INIT_VIDEO) or! {
    exitf("SDL_Init failed\n")
}
defer sdl.SDL_Quit()

event := c.malloc(192) as SDL_Event
has_event := sdl.SDL_PollEvent(event)

has_event {
    0 => {
        println("No event")
    }
    ~> {
        println("About to access event.type")
        event.type {
            256 => {
                println("Got quit event")
            }
            ~> {
                println("Got some other event")
            }
        }
    }
}
