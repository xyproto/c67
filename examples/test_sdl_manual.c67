import sdl3 as sdl

println("Calling SDL_Init...")
result = sdl.SDL_Init(32)  // SDL_INIT_VIDEO = 0x20 = 32

result {
    0 => {
        println("SDL_Init succeeded!")
    }
    ~> {
        println("SDL_Init failed, but continuing anyway...")
    }
}

println("Creating window...")
window = sdl.SDL_CreateWindow("Test", 640, 480, 0)

println("Window pointer:")
println(window)

window {
    0 => {
        println("Window creation failed!")
    }
    ~> {
        println("Window created!")
        
        println("Creating renderer...")
        renderer = sdl.SDL_CreateRenderer(window, 0)
        
        renderer {
            0 => {
                println("Renderer creation failed!")
            }
            ~> {
                println("Renderer created! Showing blue screen...")
                
                // Draw blue
                sdl.SDL_SetRenderDrawColor(renderer, 0, 0, 255, 255)
                sdl.SDL_RenderClear(renderer)
                sdl.SDL_RenderPresent(renderer)
                
                println("Sleeping...")
                sdl.SDL_Delay(2000)
                
                println("Destroying renderer...")
                sdl.SDL_DestroyRenderer(renderer)
            }
        }
        
        println("Destroying window...")
        sdl.SDL_DestroyWindow(window)
    }
}

println("Calling SDL_Quit...")
sdl.SDL_Quit()
println("Done!")
