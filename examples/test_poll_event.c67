import sdl3 as sdl

cstruct SDL_Event {
    type as uint32,
    timestamp as uint64
}

sdl.SDL_Init(sdl.SDL_INIT_VIDEO) or! {
    exitf("SDL_Init failed\n")
}
defer sdl.SDL_Quit()

event := c.malloc(192) as SDL_Event

println("About to poll event")
has_event := sdl.SDL_PollEvent(event)
println("Polled event")

has_event {
    0 => {
        println("No event")
    }
    ~> {
        println("Got event!")
    }
}
